@model AdminFlightDetailsViewModel

@{
    ViewBag.Title = "Flight Details";
}
<div class="container mt-5">
    <div class="d-flex align-items-center my-4">
        <a asp-controller="Admin" asp-action="Index" class="btn back-btn-custom me-3">← Back</a>
        <h3 class="mb-0 mx-auto">Flight Details</h3>
    </div>
    <div class="card mb-4">
        <div class="card-header main-background-color text-white">
            <h4>@Model.FlightNumber</h4>
        </div>

        <div class="card-body">
            <p><strong>Route:</strong> @Model.OriginAirport → @Model.DestinationAirport</p>
            <p><strong>Departure:</strong> @Model.DepartureTime.ToString("f")</p>
            <p><strong>Arrival:</strong> @Model.ArrivalTime.ToString("f")</p>
            <p><strong>Aircraft:</strong> @Model.AircraftModel</p>
            <p><strong>Capacity:</strong> @Model.AircraftCapacity</p>
            <p><strong>Price per Ticket:</strong> Rs @Model.Price</p>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header main-background-color text-white">
            <h5>Flight Summary</h5>
        </div>
        <div class="card-body">
            <p><strong>Total Booked Seats:</strong> @Model.TotalBookedSeats</p>
            <p><strong>Total Available Seats:</strong> @Model.TotalAvailableSeats</p>
            <p><strong>Total Revenue:</strong> Rs @Model.TotalRevenue</p>
        </div>
    </div>

    <div class="card">
        <div class="card-header main-background-color text-white">
            <h5>Bookings</h5>
        </div>
        <div class="card-body">
            @if (Model.Bookings.Count == 0)
            {
                <p class="text-muted">No bookings for this flight yet.</p>
            }
            else
            {
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>Passenger</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Seat</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var b in Model.Bookings)
                        {
                            <tr>
                                <td>@b.BookingId</td>
                                <td>@b.PassengerName</td>
                                <td>@b.Email</td>
                                <td>@b.Phone</td>
                                <td>@b.SeatNumber</td>
                                <td>@b.BookingDate?.ToString("dd MMM yyyy, hh:mm tt")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>
    </div>
</div>
